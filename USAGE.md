# Twitter Scanner - 使用说明

## 安装步骤

1. **下载代码**
   ```bash
   git clone https://github.com/Wade-Song/Twitter-Scanner.git
   cd Twitter-Scanner
   ```

2. **加载扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 Twitter-Scanner 文件夹

3. **配置 API Key 和系统提示词**
   - 点击扩展图标打开配置页面
   - 输入你的 Claude API Key
   - 自定义系统提示词（可选）
   - 分别点击"Save API Key"和"Save System Prompt"

## 获取 Claude API Key

1. 访问 [Anthropic Console](https://console.anthropic.com/)
2. 注册/登录你的账户
3. 点击"Create Key"
4. 复制生成的 API Key

## 使用方法

### 1. 打开 Twitter/X
- 访问 https://twitter.com 或 https://x.com
- 确保已登录你的账户

### 2. 开始扫描
- 在页面右上角会看到"vibe reading"按钮
- 点击按钮开始扫描时间线
- 右侧会自动展开面板显示实时收集的推文

### 3. 停止扫描
- 点击"stop"按钮停止扫描
- 系统会自动调用 Claude API 分析收集的推文
- 分析结果会显示在侧边栏

### 4. 查看结果
- 分析完成后，侧边栏会显示精选的高质量内容
- 点击"Copy All"可以复制所有分析结果
- 可以关闭侧边栏，数据仍会保留

## 功能特点

### 🎯 智能内容筛选
- 自动识别高质量、有洞察力的推文
- 过滤掉日常生活更新和无关信息
- 专注于行业见解和专业内容

### 📊 实时数据展示
- 实时显示正在收集的推文
- 随机间隔(1-5秒)自动滚动页面收集新内容
- 显示收集状态和进度

### 🤖 AI 智能分析
- 使用 Claude-3.5-Haiku 最新模型分析收集的内容
- 支持自定义系统提示词
- 智能重试机制：最多重试2次，间隔2秒
- 提取关键洞察和趋势
- 生成结构化的总结报告

### 💾 便捷操作
- 一键复制分析结果
- 数据持久化保存
- 每次新扫描自动清除旧数据

## 技术架构

### 核心模块
1. **交互控制模块** - 按钮注入和状态管理
2. **数据抓取模块** - 自动滚动和推文提取
3. **侧边栏展示模块** - 实时数据显示
4. **AI分析模块** - Claude API 集成
5. **配置管理模块** - API Key 和系统提示词管理

### 工作流程
```
用户点击"vibe reading" 
    ↓
开始每秒滚动 + 展开右侧面板
    ↓
实时抓取推文 + 面板显示
    ↓
用户点击"stop" → 停止抓取
    ↓
发送数据给 Claude 分析
    ↓
显示AI分析结果 + 复制功能
```

## 注意事项

### ⚠️ 重要提醒
- 需要配置有效的 Claude API Key
- 确保网络连接稳定
- 建议在Twitter时间线页面使用
- 可以自定义系统提示词以获得更好的分析结果

### 🔧 故障排除
- 如果按钮未出现，刷新页面重试
- 如果分析失败，检查API Key是否正确
- 如果推文提取不完整，可能需要更多滚动时间
- 如果分析结果不理想，尝试调整系统提示词
- 系统会自动重试失败的API请求，避免临时网络问题

### 🔍 查看详细错误日志
**API调用日志查看方法：**
1. 打开 `chrome://extensions/`
2. 找到 Twitter Scanner 扩展
3. 点击"service worker"链接（或"背景页"）
4. 在打开的开发者工具中查看Console标签
5. 这里会显示API调用的详细日志和错误信息

### 🔄 重试机制详情
- **最大重试次数**: 2次
- **重试间隔**: 2秒
- **重试条件**: 
  - 429 (速率限制) 错误
  - 5xx (服务器错误) 
  - 网络连接问题
- **不重试条件**: 4xx客户端错误（除429外）
- **日志记录**: 所有重试过程都会在控制台显示

### 📝 开发计划
- [ ] 支持用户自定义关注领域
- [ ] 添加数据缓存功能
- [ ] 优化推文提取算法
- [ ] 添加多语言支持

## 技术支持

如有问题请访问：https://github.com/Wade-Song/Twitter-Scanner/issues